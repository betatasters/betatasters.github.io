<!doctype html>
<html>
<head>
  <title>IPFS in the Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js" integrity="sha512-NFUcDlm4V+a2sjPX7gREIXgCSFja9cHtKPOL1zj6QhnE0vcY695MODehqkaGYTLyL2wxe/wtr4Z49SvqXq12UQ==" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-peer/9.8.0/simplepeer.min.js" integrity="sha512-E7n4M9VAeElTbAvxzEO92tYsjfg1e0INE+RQLEf3Dpra2EY2X2ygTaGi2NMpccKGY8Q7+npUX68igKUkAammKQ==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js" integrity="sha512-qoCTmFwBtCPvFhA+WAqatSOrghwpDhFHxwAGh+cppWonXbHA09nG1z5zi4/NGnp8dUhXiVrzA6EnKgJA+fyrpw==" crossorigin="anonymous"></script>


  <script src="https://cdn.jsdelivr.net/npm/ipfs/dist/index.min.js"></script>
  <script type="text/javascript">
const G=['SIGNAL','signal\x20received:\x20','offer','<div>YESSSS</div>','signal','/p2p-circuit/p2p/','random','https://betatasters.github.io/connection3#','send','type','create','parse','#qrcodeCanvas','addEventListener','data','connect','decode','stringify','recipe-pubsub-test','CLOSED','insertAdjacentHTML','body','answer','close','hash','log','location','/p2p/','afterbegin','ipfs-','substr','CONNECTED'];(function(H,F){const z=function(a){while(--a){H['push'](H['shift']());}};z(++F);}(G,0x158));const H=function(F,z){F=F-0x0;let a=G[F];return a;};const Y=H,j=Y('0x1a'),T=e=>new Promise(R=>setTimeout(R,e)),A=location[Y('0x0')]['length']===0x0,t=window[Y('0x2')][Y('0x0')][Y('0x6')](0x1);let o=null,X=null;function b(){const I=Y;X=new SimplePeer({'F':!A,'z':![]}),X['a'](I('0xc'),e=>{const s=I;str=JSON[s('0x19')](e),console[s('0x1')](s('0x8'),str),console[s('0x1')]('SIGNAL\x20length:',str['length']);var R=LZString['N'](str);o=new TextEncoder()['encode'](R),A&&node['W']['O'](j,o);}),X['a'](I('0x17'),()=>{const Z=I;console['log'](Z('0x7')),A&&X[Z('0x10')](Z('0xb'));}),X['a'](I('0x16'),e=>{const w=I;document[w('0x1d')][w('0x1c')](w('0x4'),e),X['E']&&X['P'](),b();}),X['a'](I('0x1f'),()=>{const Q=I;console['log'](Q('0x1b')),X['E']&&X['P'](),b();}),X['a']('error',e=>{console['log'](e),X['E']&&X['P'](),b();});}b(),document[Y('0x15')]('DOMContentLoaded',async()=>{const M=Y,e=window['v']=await Ipfs[M('0x12')]({'B':M('0x5')+Math[M('0xe')](),'d':{'enabled':!![],'L':{'enabled':!![],'active':!![]}}});nodeId=(await e['id']())['id'],console[M('0x1')]('node\x20id\x20'+nodeId);A&&(url=M('0xf')+nodeId,console['log'](url),jQuery(M('0x14'))['r']({'text':url}));await e['W']['subscribe'](j,({from:R,data:u,V:U,n:g})=>{const K=M;if(R!==nodeId){let h=new TextDecoder()[K('0x18')](u);h=LZString['S'](h),console[K('0x1')](K('0x9')+h);const m=JSON[K('0x13')](h);(A&&m[K('0x11')]===K('0xa')||!A&&m[K('0x11')]===K('0x1e'))&&X['y'](m);}});if(!A){for(const R of await e['l']['i']()){if(R['id']===t)continue;try{const u=M('0x3')+R['id']+M('0xd')+t;await e['l'][M('0x17')](u);}catch(U){console['log'](U);}}await T(0x3e8),o?await e['W']['O'](j,o):(await T(0x7d0),o&&await e['W']['O'](j,o));}});
  </script>
    </head>
<body>

  <div id="qrcodeCanvas"></div>

</body>
</html>
