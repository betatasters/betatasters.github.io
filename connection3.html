<!doctype html>
<html>
<head>
  <title>IPFS in the Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js" integrity="sha512-NFUcDlm4V+a2sjPX7gREIXgCSFja9cHtKPOL1zj6QhnE0vcY695MODehqkaGYTLyL2wxe/wtr4Z49SvqXq12UQ==" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-peer/9.8.0/simplepeer.min.js" integrity="sha512-E7n4M9VAeElTbAvxzEO92tYsjfg1e0INE+RQLEf3Dpra2EY2X2ygTaGi2NMpccKGY8Q7+npUX68igKUkAammKQ==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js" integrity="sha512-qoCTmFwBtCPvFhA+WAqatSOrghwpDhFHxwAGh+cppWonXbHA09nG1z5zi4/NGnp8dUhXiVrzA6EnKgJA+fyrpw==" crossorigin="anonymous"></script>


  <script src="https://cdn.jsdelivr.net/npm/ipfs/dist/index.min.js"></script>
  <script type="text/javascript">
  const _0x2a87=['div','connect','answer','publish','<div\x20id=\x27qrcodeCanvas\x27></div>','body','/p2p-circuit/p2p/','error','pubsub','padding-left:\x2010px;','signal','CONNECTED','compressToUTF16','data','log','qrcode','came\x20online','destroy','readable','parse','type','stringify','create','swarm','decompressFromUint8Array','length','substr','SIGNAL','random','DOMContentLoaded','SIGNAL\x20length:','addrs','decompressFromUTF16','offline','subscribe','close','https://betatasters.github.io/connection3#','node','hash','addEventListener','online','innerHTML','style','<div><h1>YAYYYY</h1>YESSSS</div>','location','decode','compressToUint8Array'];(function(_0x2dfd25,_0x2a872d){const _0x153555=function(_0x52da2f){while(--_0x52da2f){_0x2dfd25['push'](_0x2dfd25['shift']());}};_0x153555(++_0x2a872d);}(_0x2a87,0x114));const _0x1535=function(_0x2dfd25,_0x2a872d){_0x2dfd25=_0x2dfd25-0x0;let _0x153555=_0x2a87[_0x2dfd25];return _0x153555;};const _0x5c22a5=_0x1535,topic='recipe-pubsub-test',delay=_0x52da2f=>new Promise(_0x49ee0b=>setTimeout(_0x49ee0b,_0x52da2f)),isMain=location[_0x5c22a5('0x2c')][_0x5c22a5('0x1f')]===0x0,mainsId=window[_0x5c22a5('0x3')][_0x5c22a5('0x2c')][_0x5c22a5('0x20')](0x1);let p2pSignal=null,p=null;function setupP2P(){const _0x228da4=_0x5c22a5;p=new SimplePeer({'initiator':!isMain,'trickle':![]}),p['on'](_0x228da4('0x10'),_0x4ad144=>{const _0xb6987b=_0x228da4;str=JSON[_0xb6987b('0x1b')](_0x4ad144),console[_0xb6987b('0x14')](_0xb6987b('0x21'),str),console[_0xb6987b('0x14')](_0xb6987b('0x24'),str['length']);var _0x753fb6=LZString[_0xb6987b('0x12')](str);p2pSignal=new TextEncoder()['encode'](_0x753fb6),isMain&&node[_0xb6987b('0xe')][_0xb6987b('0x9')](topic,p2pSignal);}),p['on'](_0x228da4('0x7'),()=>{const _0x3fa6ef=_0x228da4;console['log'](_0x3fa6ef('0x11'));if(isMain){let _0x403c15=_0x3fa6ef('0x2');var _0x19cd41=LZString[_0x3fa6ef('0x5')](_0x403c15);p['send'](_0x19cd41);}}),p['on'](_0x228da4('0x13'),_0x37045c=>{const _0x1e0ff4=_0x228da4;!isMain&&(document[_0x1e0ff4('0xb')]['innerHTML']=LZString[_0x1e0ff4('0x1e')](_0x37045c)),p['readable']&&p[_0x1e0ff4('0x17')](),isMain&&setupP2P();}),p['on'](_0x228da4('0x29'),()=>{const _0x1c50de=_0x228da4;console[_0x1c50de('0x14')]('CLOSED'),p['readable']&&p[_0x1c50de('0x17')](),isMain&&setupP2P();}),p['on'](_0x228da4('0xd'),_0x25d5f4=>{const _0x4c5f83=_0x228da4;console[_0x4c5f83('0x14')](_0x25d5f4),p[_0x4c5f83('0x18')]&&p[_0x4c5f83('0x17')](),isMain&&setupP2P();});}setupP2P(),window['addEventListener'](_0x5c22a5('0x2e'),()=>console[_0x5c22a5('0x14')](_0x5c22a5('0x16'))),window[_0x5c22a5('0x2d')](_0x5c22a5('0x27'),()=>console['log']('came\x20offline')),document[_0x5c22a5('0x2d')](_0x5c22a5('0x23'),async()=>{const _0x11afc4=_0x5c22a5;isMain?document['body'][_0x11afc4('0x0')]=_0x11afc4('0xa'):document[_0x11afc4('0xb')][_0x11afc4('0x0')]='<div\x20id=\x27loading\x27>Loading\x20Recipe<div\x20class=\x27loader\x27></div><div>Connecting\x20to\x20IPFS\x20Nodes:</div></div>';const _0x44afb2=window[_0x11afc4('0x2b')]=await Ipfs[_0x11afc4('0x1c')]({'repo':'ipfs-'+Math[_0x11afc4('0x22')](),'relay':{'enabled':!![],'hop':{'enabled':!![],'active':!![]}}});nodeId=(await _0x44afb2['id']())['id'],console[_0x11afc4('0x14')]('node\x20id\x20'+nodeId);isMain&&(url=_0x11afc4('0x2a')+nodeId,console['log'](url),jQuery('#qrcodeCanvas')[_0x11afc4('0x15')]({'text':url}));await _0x44afb2['pubsub'][_0x11afc4('0x28')](topic,({from:_0xb55237,data:_0x2343da,topicIDs:_0x42bb7f,seqno:_0x4e1e24})=>{const _0x199c25=_0x11afc4;if(_0xb55237!==nodeId){let _0x32cb01=new TextDecoder()[_0x199c25('0x4')](_0x2343da);_0x32cb01=LZString[_0x199c25('0x26')](_0x32cb01),console[_0x199c25('0x14')]('signal\x20received:\x20'+_0x32cb01);const _0x5a1bb1=JSON[_0x199c25('0x19')](_0x32cb01);(isMain&&_0x5a1bb1[_0x199c25('0x1a')]==='offer'||!isMain&&_0x5a1bb1[_0x199c25('0x1a')]===_0x199c25('0x8'))&&p[_0x199c25('0x10')](_0x5a1bb1);}});if(!isMain){for(const _0x47d8ce of await _0x44afb2['swarm'][_0x11afc4('0x25')]()){if(_0x47d8ce['id']===mainsId)continue;try{const _0x21c7f1='/p2p/'+_0x47d8ce['id']+_0x11afc4('0xc')+mainsId;var _0x5ebf04=document['createElement'](_0x11afc4('0x6'));_0x5ebf04['innerText']=_0x47d8ce['id'],_0x5ebf04[_0x11afc4('0x1')]=_0x11afc4('0xf'),document['getElementById']('loading')['appendChild'](_0x5ebf04),await _0x44afb2[_0x11afc4('0x1d')]['connect'](_0x21c7f1);}catch(_0x44dd4e){console['log'](_0x44dd4e);}}await delay(0x3e8),p2pSignal?await _0x44afb2[_0x11afc4('0xe')]['publish'](topic,p2pSignal):(await delay(0x7d0),p2pSignal&&await _0x44afb2[_0x11afc4('0xe')]['publish'](topic,p2pSignal));}});
  </script>

  <style>
  .loader {
    border: 16px solid #f3f3f3; /* Light grey */
    border-top: 16px solid #3498db; /* Blue */
    border-radius: 50%;
    width: 120px;
    height: 120px;
    animation: spin 2s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  </style>
</head>
<body>





</body>
</html>
