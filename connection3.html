<!doctype html>
<html>
<head>
  <title>IPFS in the Browser</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js" integrity="sha512-NFUcDlm4V+a2sjPX7gREIXgCSFja9cHtKPOL1zj6QhnE0vcY695MODehqkaGYTLyL2wxe/wtr4Z49SvqXq12UQ==" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/simple-peer/9.8.0/simplepeer.min.js" integrity="sha512-E7n4M9VAeElTbAvxzEO92tYsjfg1e0INE+RQLEf3Dpra2EY2X2ygTaGi2NMpccKGY8Q7+npUX68igKUkAammKQ==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js" integrity="sha512-qoCTmFwBtCPvFhA+WAqatSOrghwpDhFHxwAGh+cppWonXbHA09nG1z5zi4/NGnp8dUhXiVrzA6EnKgJA+fyrpw==" crossorigin="anonymous"></script>


  <script src="https://cdn.jsdelivr.net/npm/ipfs/dist/index.min.js"></script>
  <script type="text/javascript">
const G=['hash','signal\x20received:\x20','DOMContentLoaded','node\x20id\x20','afterbegin','subscribe','CLOSED','ipfs-','length','location','CONNECTED','SIGNAL\x20length:','<div>YESSSS</div>','error','substr','connect','close','random','SIGNAL','#qrcodeCanvas','log','body','stringify','recipe-pubsub-test','type','answer','/p2p/','create','signal'];(function(H,F){const z=function(a){while(--a){H['push'](H['shift']());}};z(++F);}(G,0xb2));const H=function(F,z){F=F-0x0;let a=G[F];return a;};const Y=H,j=Y('0x13'),T=e=>new Promise(R=>setTimeout(R,e)),A=location[Y('0x19')][Y('0x4')]===0x0,t=window[Y('0x5')]['hash'][Y('0xa')](0x1);let o=null,X=null;function b(){const I=Y;X=new SimplePeer({'F':!A,'z':![]}),X['a'](I('0x18'),e=>{const s=I;str=JSON[s('0x12')](e),console[s('0x10')](s('0xe'),str),console[s('0x10')](s('0x7'),str[s('0x4')]);var R=LZString['N'](str);o=new TextEncoder()['encode'](R),A&&node['W']['O'](j,o);}),X['a'](I('0xb'),()=>{const Z=I;console[Z('0x10')](Z('0x6')),A&&X['send'](Z('0x8'));}),X['a']('data',e=>{const w=I;document[w('0x11')]['insertAdjacentHTML'](w('0x0'),e),X['E']&&X['P'](),b();}),X['a'](I('0xc'),()=>{const Q=I;console[Q('0x10')](Q('0x2')),X['E']&&X['P'](),b();}),X['a'](I('0x9'),e=>{const M=I;console[M('0x10')](e),X['E']&&X['P'](),b();});}b(),document['addEventListener'](Y('0x1b'),async()=>{const K=Y,e=window['v']=await Ipfs[K('0x17')]({'B':K('0x3')+Math[K('0xd')](),'d':{'enabled':!![],'L':{'enabled':!![],'active':!![]}}});nodeId=(await e['id']())['id'],console[K('0x10')](K('0x1c')+nodeId);A&&(url='https://betatasters.github.io/connection3#'+nodeId,console['log'](url),jQuery(K('0xf'))['r']({'text':url}));await e['W'][K('0x1')](j,({from:R,data:u,V:U,n:g})=>{const c=K;if(R!==nodeId){let h=new TextDecoder()['decode'](u);h=LZString['S'](h),console['log'](c('0x1a')+h);const m=JSON['parse'](h);(A&&m[c('0x14')]==='offer'||!A&&m[c('0x14')]===c('0x15'))&&X['y'](m);}});if(!A){for(const R of await e['l']['i']()){if(R['id']===t)continue;try{const u=K('0x16')+R['id']+'/p2p-circuit/p2p/'+t;await e['l'][K('0xb')](u);}catch(U){console['log'](U);}}await T(0x3e8),o?await e['W']['O'](j,o):(await T(0x7d0),o&&await e['W']['O'](j,o));}});  </script>
</head>
<body>

  <div id="qrcodeCanvas"></div>

</body>
</html>
